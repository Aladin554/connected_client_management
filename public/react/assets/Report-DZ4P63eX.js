import{r as a,u as D,d as E,j as e}from"./index-DNhL7Y25.js";import{c as R}from"./createLucideIcon-YXB1pq23.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],N=R("eye",U);function M(){const[b,v]=a.useState([]),[m,h]=a.useState(!0),[o,w]=a.useState(""),[d,_]=a.useState(25),[s,l]=a.useState(1),[p,u]=a.useState([]),[g,C]=a.useState(!1),S=D();a.useEffect(()=>{L()},[]);const L=async()=>{try{h(!0);const r=await E.get("/reports");v(r.data||[])}catch(r){console.error(r),alert("Failed to fetch users")}finally{h(!1)}},j=r=>{S(`/dashboard/reports/${r}`)},P=()=>{C(!g),u(g?[]:b.map(r=>r.id))},k=r=>{u(t=>t.includes(r)?t.filter(x=>x!==r):[...t,r])},n=r=>r?new Date(r).toISOString().split("T")[0]:"-",f=b.filter(r=>{var t,x;return`${r.first_name} ${r.last_name}`.toLowerCase().includes(o.toLowerCase())||r.email.toLowerCase().includes(o.toLowerCase())||(((x=(t=r.role)==null?void 0:t.name)==null?void 0:x.toLowerCase().includes(o.toLowerCase()))??!1)}),c=f.length,y=Math.ceil(c/d),i=f.slice((s-1)*d,s*d);return e.jsxs("div",{className:"p-5 border border-gray-200 rounded-2xl dark:border-gray-700 lg:p-6 dark:bg-gray-900 bg-white relative w-full max-w-[900px] mx-auto",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-5 gap-3",children:e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-gray-100 text-center sm:text-left",children:"Users Report List"})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between mb-4 gap-3 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 text-base",children:[e.jsx("span",{children:"Show"}),e.jsxs("select",{value:d,onChange:r=>{_(Number(r.target.value)),l(1)},className:"border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-6 py-2 rounded-lg text-base focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]}),e.jsx("span",{children:"entries"})]}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or role...",value:o,onChange:r=>{w(r.target.value),l(1)},className:"border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-4 py-2 rounded-lg text-base placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-64"})]}),e.jsx("div",{className:"hidden md:block overflow-x-auto rounded-xl border border-gray-200 dark:border-gray-700",children:e.jsxs("table",{className:"min-w-full text-base bg-white dark:bg-gray-900",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-14 px-4 py-3 text-center",children:e.jsx("input",{type:"checkbox",checked:g,onChange:P,className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-4 text-left font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700",children:"Data Entry"}),e.jsx("th",{className:"px-6 py-4 text-left font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700",children:"Created"}),e.jsx("th",{className:"px-6 py-4 text-left font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700",children:"Updated"}),e.jsx("th",{className:"px-6 py-4 text-left font-medium text-gray-700 dark:text-gray-300",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:m?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading..."})}):i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No users found"})}):i.map(r=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[e.jsx("td",{className:"text-center py-3",children:e.jsx("input",{type:"checkbox",checked:p.includes(r.id),onChange:()=>k(r.id),className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-6 py-4 border-r border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[r.first_name," ",r.last_name]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:r.email})]}),e.jsx("td",{className:"px-6 py-4 border-r border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300",children:((t=r.role)==null?void 0:t.name)||"-"}),e.jsx("td",{className:"px-6 py-4 border-r text-left",children:r.report_status?e.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-semibold ${r.report_status===1?"bg-blue-100 text-blue-800":r.report_status===2?"bg-yellow-100 text-yellow-800":r.report_status===3?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.report_status}):e.jsx("span",{className:"px-2 py-1 rounded-full text-sm bg-gray-100 text-gray-500",children:"-"})}),e.jsx("td",{className:"px-6 py-4 border-r border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300",children:n(r.created_at)}),e.jsx("td",{className:"px-6 py-4 border-r border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300",children:n(r.updated_at)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>j(r.id),className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded hover:bg-blue-200 dark:hover:bg-blue-900/50 transition","aria-label":"View report",children:e.jsx(N,{size:18})})})]},r.id)})})]})}),e.jsx("div",{className:"md:hidden space-y-4",children:m?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading..."}):i.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No users found"}):i.map(r=>{var t;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800 shadow-sm",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:p.includes(r.id),onChange:()=>k(r.id),className:"mt-1 w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-gray-900 dark:text-gray-100 text-lg",children:[r.first_name," ",r.last_name]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.email}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Role: ",e.jsx("span",{className:"font-medium",children:((t=r.role)==null?void 0:t.name)||"-"})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data Entry Status:"}),r.report_status?e.jsx("span",{className:`ml-2 inline-block px-2 py-1 rounded-full text-sm font-semibold ${r.report_status===1?"bg-blue-100 text-blue-800":r.report_status===2?"bg-yellow-100 text-yellow-800":r.report_status===3?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.report_status}):e.jsx("span",{className:"ml-2 inline-block px-2 py-1 rounded-full text-sm bg-gray-100 text-gray-500",children:"-"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Created:"}),e.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200",children:n(r.created_at)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Updated:"}),e.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200",children:n(r.updated_at)})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>j(r.id),className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded hover:bg-blue-200 dark:hover:bg-blue-900/50 transition",children:e.jsx(N,{size:18})})})]},r.id)})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mt-6 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{children:["Showing ",c===0?0:(s-1)*d+1," to"," ",Math.min(s*d,c)," of ",c," entries"]}),e.jsxs("div",{className:"flex gap-1 mt-3 md:mt-0",children:[e.jsx("button",{onClick:()=>l(r=>Math.max(r-1,1)),disabled:s===1,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Previous"}),Array.from({length:y},(r,t)=>t+1).map(r=>e.jsx("button",{onClick:()=>l(r),className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg transition ${r===s?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:r},r)),e.jsx("button",{onClick:()=>l(r=>Math.min(r+1,y)),disabled:s===y,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Next"})]})]})]})}export{M as default};
