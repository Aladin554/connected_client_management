const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-54330XTT.js","assets/index-DNhL7Y25.js","assets/index-CunicsG5.css","assets/index-CA7Q8n4c.js"])))=>i.map(i=>d[i]);
import{r as c,R as $,m as zn,j as i,d as se,i as Pn,_ as _n}from"./index-DNhL7Y25.js";import{L as $n}from"./Loader-D6qllKr2.js";import{r as _e}from"./index-CA7Q8n4c.js";import{P as Qe}from"./plus-CE6BtWri.js";import{L as Fn}from"./layout-grid-CD4KbQT9.js";import{c as we}from"./createLucideIcon-YXB1pq23.js";import{U as Zt}from"./users-vGNZyGrN.js";import{S as en}from"./square-pen-BAlnmBzi.js";import{B as Bn}from"./bell-Zv1gySWm.js";import{X as mt}from"./x-CIRX2IQL.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Un=we("calendar",Xn);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wn=we("chevron-down",Yn);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],wt=we("ellipsis",Kn);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Hn=we("image",Vn);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Gn=we("message-square",qn);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Qn=we("paperclip",Jn);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],er=we("square-check-big",Zn);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],nr=we("star",tr);function rr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const at=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ke(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Dt(e){return"nodeType"in e}function H(e){var t,n;return e?ke(e)?e:Dt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function jt(e){const{Document:t}=H(e);return e instanceof t}function Ye(e){return ke(e)?!1:e instanceof H(e).HTMLElement}function tn(e){return e instanceof H(e).SVGElement}function Ae(e){return e?ke(e)?e.document:Dt(e)?jt(e)?e:Ye(e)||tn(e)?e.ownerDocument:document:document:document}const ie=at?c.useLayoutEffect:c.useEffect;function lt(e){const t=c.useRef(e);return ie(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function sr(){const e=c.useRef(null),t=c.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Xe(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return ie(()=>{n.current!==e&&(n.current=e)},t),n}function We(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function et(e){const t=lt(e),n=c.useRef(null),r=c.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function tt(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let pt={};function Ke(e,t){return c.useMemo(()=>{if(t)return t;const n=pt[e]==null?0:pt[e]+1;return pt[e]=n,e+"-"+n},[e,t])}function nn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,a)=>{const l=Object.entries(a);for(const[d,u]of l){const f=o[d];f!=null&&(o[d]=f+e*u)}return o},{...t})}}const Ie=nn(1),nt=nn(-1);function or(e){return"clientX"in e&&"clientY"in e}function ct(e){if(!e)return!1;const{KeyboardEvent:t}=H(e.target);return t&&e instanceof t}function ir(e){if(!e)return!1;const{TouchEvent:t}=H(e.target);return t&&e instanceof t}function rt(e){if(ir(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return or(e)?{x:e.clientX,y:e.clientY}:null}const ye=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ye.Translate.toString(e),ye.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Ft="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ar(e){return e.matches(Ft)?e:e.querySelector(Ft)}const lr={display:"none"};function cr(e){let{id:t,value:n}=e;return $.createElement("div",{id:t,style:lr},n)}function dr(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return $.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function ur(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const rn=c.createContext(null);function fr(e){const t=c.useContext(rn);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function gr(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:s,event:o}=r;e.forEach(a=>{var l;return(l=a[s])==null?void 0:l.call(a,o)})},[e]),t]}const hr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},mr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function pr(e){let{announcements:t=mr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=hr}=e;const{announce:o,announcement:a}=ur(),l=Ke("DndLiveRegion"),[d,u]=c.useState(!1);if(c.useEffect(()=>{u(!0)},[]),fr(c.useMemo(()=>({onDragStart(g){let{active:p}=g;o(t.onDragStart({active:p}))},onDragMove(g){let{active:p,over:h}=g;t.onDragMove&&o(t.onDragMove({active:p,over:h}))},onDragOver(g){let{active:p,over:h}=g;o(t.onDragOver({active:p,over:h}))},onDragEnd(g){let{active:p,over:h}=g;o(t.onDragEnd({active:p,over:h}))},onDragCancel(g){let{active:p,over:h}=g;o(t.onDragCancel({active:p,over:h}))}}),[o,t])),!d)return null;const f=$.createElement($.Fragment,null,$.createElement(cr,{id:r,value:s.draggable}),$.createElement(dr,{id:l,announcement:a}));return n?_e.createPortal(f,n):f}var B;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(B||(B={}));function st(){}function vr(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function br(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ae=Object.freeze({x:0,y:0});function xr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function yr(e,t){const n=rt(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function wr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Cr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Bt(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function Nr(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}const Sr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Bt(t),o=[];for(const a of r){const{id:l}=a,d=n.get(l);if(d){const u=Bt(d),f=s.reduce((p,h,E)=>p+xr(u[E],h),0),g=Number((f/4).toFixed(4));o.push({id:l,data:{droppableContainer:a,value:g}})}}return o.sort(wr)};function Dr(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),a=s-r,l=o-n;if(r<s&&n<o){const d=t.width*t.height,u=e.width*e.height,f=a*l,g=f/(d+u-f);return Number(g.toFixed(4))}return 0}const jr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const d=Dr(l,t);d>0&&s.push({id:a,data:{droppableContainer:o,value:d}})}}return s.sort(Cr)};function Rr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function sn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ae}function Er(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const Ir=Er(1);function on(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function kr(e,t,n){const r=on(t);if(!r)return e;const{scaleX:s,scaleY:o,x:a,y:l}=r,d=e.left-a-(1-s)*parseFloat(n),u=e.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?e.width/s:e.width,g=o?e.height/o:e.height;return{width:f,height:g,top:u,right:d+f,bottom:u+g,left:d}}const Ar={ignoreTransform:!1};function Me(e,t){t===void 0&&(t=Ar);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=H(e).getComputedStyle(e);u&&(n=kr(n,u,f))}const{top:r,left:s,width:o,height:a,bottom:l,right:d}=n;return{top:r,left:s,width:o,height:a,bottom:l,right:d}}function Xt(e){return Me(e,{ignoreTransform:!0})}function Mr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Or(e,t){return t===void 0&&(t=H(e).getComputedStyle(e)),t.position==="fixed"}function Lr(e,t){t===void 0&&(t=H(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function Rt(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(jt(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Ye(s)||tn(s)||n.includes(s))return n;const o=H(e).getComputedStyle(s);return s!==e&&Lr(s,o)&&n.push(s),Or(s,o)?n:r(s.parentNode)}return e?r(e):n}function an(e){const[t]=Rt(e,1);return t??null}function vt(e){return!at||!e?null:ke(e)?e:Dt(e)?jt(e)||e===Ae(e).scrollingElement?window:Ye(e)?e:null:null}function ln(e){return ke(e)?e.scrollX:e.scrollLeft}function cn(e){return ke(e)?e.scrollY:e.scrollTop}function Ct(e){return{x:ln(e),y:cn(e)}}var X;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(X||(X={}));function dn(e){return!at||!e?!1:e===document.scrollingElement}function un(e){const t={x:0,y:0},n=dn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const Tr={x:.2,y:.2};function zr(e,t,n,r,s){let{top:o,left:a,right:l,bottom:d}=n;r===void 0&&(r=10),s===void 0&&(s=Tr);const{isTop:u,isBottom:f,isLeft:g,isRight:p}=un(e),h={x:0,y:0},E={x:0,y:0},v={height:t.height*s.y,width:t.width*s.x};return!u&&o<=t.top+v.height?(h.y=X.Backward,E.y=r*Math.abs((t.top+v.height-o)/v.height)):!f&&d>=t.bottom-v.height&&(h.y=X.Forward,E.y=r*Math.abs((t.bottom-v.height-d)/v.height)),!p&&l>=t.right-v.width?(h.x=X.Forward,E.x=r*Math.abs((t.right-v.width-l)/v.width)):!g&&a<=t.left+v.width&&(h.x=X.Backward,E.x=r*Math.abs((t.left+v.width-a)/v.width)),{direction:h,speed:E}}function Pr(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:a}=window;return{top:0,left:0,right:o,bottom:a,width:o,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function fn(e){return e.reduce((t,n)=>Ie(t,Ct(n)),ae)}function _r(e){return e.reduce((t,n)=>t+ln(n),0)}function $r(e){return e.reduce((t,n)=>t+cn(n),0)}function gn(e,t){if(t===void 0&&(t=Me),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);an(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Fr=[["x",["left","right"],_r],["y",["top","bottom"],$r]];class Et{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Rt(n),s=fn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,a,l]of Fr)for(const d of a)Object.defineProperty(this,d,{get:()=>{const u=l(r),f=s[o]-u;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $e{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Br(e){const{EventTarget:t}=H(e);return e instanceof t?e:Ae(e)}function bt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var oe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(oe||(oe={}));function Ut(e){e.preventDefault()}function Xr(e){e.stopPropagation()}var L;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(L||(L={}));const hn={start:[L.Space,L.Enter],cancel:[L.Esc],end:[L.Space,L.Enter,L.Tab]},Ur=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case L.Right:return{...n,x:n.x+25};case L.Left:return{...n,x:n.x-25};case L.Down:return{...n,y:n.y+25};case L.Up:return{...n,y:n.y-25}}};class mn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new $e(Ae(n)),this.windowListeners=new $e(H(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(oe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&gn(r),n(ae)}handleKeyDown(t){if(ct(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=hn,coordinateGetter:a=Ur,scrollBehavior:l="smooth"}=s,{code:d}=t;if(o.end.includes(d)){this.handleEnd(t);return}if(o.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:u}=r.current,f=u?{x:u.left,y:u.top}:ae;this.referenceCoordinates||(this.referenceCoordinates=f);const g=a(t,{active:n,context:r.current,currentCoordinates:f});if(g){const p=nt(g,f),h={x:0,y:0},{scrollableAncestors:E}=r.current;for(const v of E){const x=t.code,{isTop:C,isRight:w,isLeft:N,isBottom:D,maxScroll:j,minScroll:k}=un(v),R=Pr(v),y={x:Math.min(x===L.Right?R.right-R.width/2:R.right,Math.max(x===L.Right?R.left:R.left+R.width/2,g.x)),y:Math.min(x===L.Down?R.bottom-R.height/2:R.bottom,Math.max(x===L.Down?R.top:R.top+R.height/2,g.y))},T=x===L.Right&&!w||x===L.Left&&!N,z=x===L.Down&&!D||x===L.Up&&!C;if(T&&y.x!==g.x){const O=v.scrollLeft+p.x,W=x===L.Right&&O<=j.x||x===L.Left&&O>=k.x;if(W&&!p.y){v.scrollTo({left:O,behavior:l});return}W?h.x=v.scrollLeft-O:h.x=x===L.Right?v.scrollLeft-j.x:v.scrollLeft-k.x,h.x&&v.scrollBy({left:-h.x,behavior:l});break}else if(z&&y.y!==g.y){const O=v.scrollTop+p.y,W=x===L.Down&&O<=j.y||x===L.Up&&O>=k.y;if(W&&!p.x){v.scrollTo({top:O,behavior:l});return}W?h.y=v.scrollTop-O:h.y=x===L.Down?v.scrollTop-j.y:v.scrollTop-k.y,h.y&&v.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(t,Ie(nt(g,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}mn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=hn,onActivation:s}=t,{active:o}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=o.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function Yt(e){return!!(e&&"distance"in e)}function Wt(e){return!!(e&&"delay"in e)}class It{constructor(t,n,r){var s;r===void 0&&(r=Br(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:a}=o;this.props=t,this.events=n,this.document=Ae(a),this.documentListeners=new $e(this.document),this.listeners=new $e(r),this.windowListeners=new $e(H(a)),this.initialCoordinates=(s=rt(o))!=null?s:ae,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.DragStart,Ut),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),this.windowListeners.add(oe.ContextMenu,Ut),this.documentListeners.add(oe.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Wt(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Yt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(oe.Click,Xr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(oe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:a,options:{activationConstraint:l}}=o;if(!s)return;const d=(n=rt(t))!=null?n:ae,u=nt(s,d);if(!r&&l){if(Yt(l)){if(l.tolerance!=null&&bt(u,l.tolerance))return this.handleCancel();if(bt(u,l.distance))return this.handleStart()}if(Wt(l)&&bt(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),a(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===L.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Yr={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class kt extends It{constructor(t){const{event:n}=t,r=Ae(n.target);super(t,Yr,r)}}kt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Wr={move:{name:"mousemove"},end:{name:"mouseup"}};var Nt;(function(e){e[e.RightClick=2]="RightClick"})(Nt||(Nt={}));class Kr extends It{constructor(t){super(t,Wr,Ae(t.event.target))}}Kr.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Nt.RightClick?!1:(r==null||r({event:n}),!0)}}];const xt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Vr extends It{constructor(t){super(t,xt)}static setup(){return window.addEventListener(xt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(xt.move.name,t)};function t(){}}}Vr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Fe;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Fe||(Fe={}));var ot;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ot||(ot={}));function Hr(e){let{acceleration:t,activator:n=Fe.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:a=5,order:l=ot.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:f,delta:g,threshold:p}=e;const h=Gr({delta:g,disabled:!o}),[E,v]=sr(),x=c.useRef({x:0,y:0}),C=c.useRef({x:0,y:0}),w=c.useMemo(()=>{switch(n){case Fe.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Fe.DraggableRect:return s}},[n,s,d]),N=c.useRef(null),D=c.useCallback(()=>{const k=N.current;if(!k)return;const R=x.current.x*C.current.x,y=x.current.y*C.current.y;k.scrollBy(R,y)},[]),j=c.useMemo(()=>l===ot.TreeOrder?[...u].reverse():u,[l,u]);c.useEffect(()=>{if(!o||!u.length||!w){v();return}for(const k of j){if((r==null?void 0:r(k))===!1)continue;const R=u.indexOf(k),y=f[R];if(!y)continue;const{direction:T,speed:z}=zr(k,y,w,t,p);for(const O of["x","y"])h[O][T[O]]||(z[O]=0,T[O]=0);if(z.x>0||z.y>0){v(),N.current=k,E(D,a),x.current=z,C.current=T;return}}x.current={x:0,y:0},C.current={x:0,y:0},v()},[t,D,r,v,o,a,JSON.stringify(w),JSON.stringify(h),E,u,j,f,JSON.stringify(p)])}const qr={x:{[X.Backward]:!1,[X.Forward]:!1},y:{[X.Backward]:!1,[X.Forward]:!1}};function Gr(e){let{delta:t,disabled:n}=e;const r=tt(t);return We(s=>{if(n||!r||!s)return qr;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[X.Backward]:s.x[X.Backward]||o.x===-1,[X.Forward]:s.x[X.Forward]||o.x===1},y:{[X.Backward]:s.y[X.Backward]||o.y===-1,[X.Forward]:s.y[X.Forward]||o.y===1}}},[n,t,r])}function Jr(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return We(s=>{var o;return t==null?null:(o=r??s)!=null?o:null},[r,t])}function Qr(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...o]},[]),[e,t])}var Ue;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ue||(Ue={}));var St;(function(e){e.Optimized="optimized"})(St||(St={}));const Kt=new Map;function Zr(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,a]=c.useState(null),{frequency:l,measure:d,strategy:u}=s,f=c.useRef(e),g=x(),p=Xe(g),h=c.useCallback(function(C){C===void 0&&(C=[]),!p.current&&a(w=>w===null?C:w.concat(C.filter(N=>!w.includes(N))))},[p]),E=c.useRef(null),v=We(C=>{if(g&&!n)return Kt;if(!C||C===Kt||f.current!==e||o!=null){const w=new Map;for(let N of e){if(!N)continue;if(o&&o.length>0&&!o.includes(N.id)&&N.rect.current){w.set(N.id,N.rect.current);continue}const D=N.node.current,j=D?new Et(d(D),D):null;N.rect.current=j,j&&w.set(N.id,j)}return w}return C},[e,o,n,g,d]);return c.useEffect(()=>{f.current=e},[e]),c.useEffect(()=>{g||h()},[n,g]),c.useEffect(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),c.useEffect(()=>{g||typeof l!="number"||E.current!==null||(E.current=setTimeout(()=>{h(),E.current=null},l))},[l,g,h,...r]),{droppableRects:v,measureDroppableContainers:h,measuringScheduled:o!=null};function x(){switch(u){case Ue.Always:return!1;case Ue.BeforeDragging:return n;default:return!n}}}function At(e,t){return We(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function es(e,t){return At(e,t)}function ts(e){let{callback:t,disabled:n}=e;const r=lt(t),s=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return c.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function dt(e){let{callback:t,disabled:n}=e;const r=lt(t),s=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return c.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ns(e){return new Et(Me(e),e)}function Vt(e,t,n){t===void 0&&(t=ns);const[r,s]=c.useState(null);function o(){s(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??n)!=null?u:null}const f=t(e);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const a=ts({callback(d){if(e)for(const u of d){const{type:f,target:g}=u;if(f==="childList"&&g instanceof HTMLElement&&g.contains(e)){o();break}}}}),l=dt({callback:o});return ie(()=>{o(),e?(l==null||l.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[e]),r}function rs(e){const t=At(e);return sn(e,t)}const Ht=[];function ss(e){const t=c.useRef(e),n=We(r=>e?r&&r!==Ht&&e&&t.current&&e.parentNode===t.current.parentNode?r:Rt(e):Ht,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function os(e){const[t,n]=c.useState(null),r=c.useRef(e),s=c.useCallback(o=>{const a=vt(o.target);a&&n(l=>l?(l.set(a,Ct(a)),new Map(l)):null)},[]);return c.useEffect(()=>{const o=r.current;if(e!==o){a(o);const l=e.map(d=>{const u=vt(d);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Ct(u)]):null}).filter(d=>d!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(o)};function a(l){l.forEach(d=>{const u=vt(d);u==null||u.removeEventListener("scroll",s)})}},[s,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,a)=>Ie(o,a),ae):fn(e):ae,[e,t])}function qt(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==ae;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?nt(e,n.current):ae}function is(e){c.useEffect(()=>{if(!at)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function as(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=a=>{o(a,t)},n},{}),[e,t])}function pn(e){return c.useMemo(()=>e?Mr(e):null,[e])}const Gt=[];function ls(e,t){t===void 0&&(t=Me);const[n]=e,r=pn(n?H(n):null),[s,o]=c.useState(Gt);function a(){o(()=>e.length?e.map(d=>dn(d)?r:new Et(t(d),d)):Gt)}const l=dt({callback:a});return ie(()=>{l==null||l.disconnect(),a(),e.forEach(d=>l==null?void 0:l.observe(d))},[e]),s}function vn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ye(t)?t:e}function cs(e){let{measure:t}=e;const[n,r]=c.useState(null),s=c.useCallback(u=>{for(const{target:f}of u)if(Ye(f)){r(g=>{const p=t(f);return g?{...g,width:p.width,height:p.height}:p});break}},[t]),o=dt({callback:s}),a=c.useCallback(u=>{const f=vn(u);o==null||o.disconnect(),f&&(o==null||o.observe(f)),r(f?t(f):null)},[t,o]),[l,d]=et(a);return c.useMemo(()=>({nodeRef:l,rect:n,setRef:d}),[n,l,d])}const ds=[{sensor:kt,options:{}},{sensor:mn,options:{}}],us={current:{}},Ze={draggable:{measure:Xt},droppable:{measure:Xt,strategy:Ue.WhileDragging,frequency:St.Optimized},dragOverlay:{measure:Me}};class Be extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const fs={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Be,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:st},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ze,measureDroppableContainers:st,windowRect:null,measuringScheduled:!1},bn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:st,draggableNodes:new Map,over:null,measureDroppableContainers:st},Ve=c.createContext(bn),xn=c.createContext(fs);function gs(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Be}}}function hs(e,t){switch(t.type){case B.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case B.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case B.DragEnd:case B.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case B.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Be(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case B.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new Be(e.droppable.containers);return a.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case B.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new Be(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function ms(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=c.useContext(Ve),o=tt(r),a=tt(n==null?void 0:n.id);return c.useEffect(()=>{if(!t&&!r&&o&&a!=null){if(!ct(o)||document.activeElement===o.target)return;const l=s.get(a);if(!l)return;const{activatorNode:d,node:u}=l;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[d.current,u.current]){if(!f)continue;const g=ar(f);if(g){g.focus();break}}})}},[r,t,s,a,o]),null}function yn(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function ps(e){return c.useMemo(()=>({draggable:{...Ze.draggable,...e==null?void 0:e.draggable},droppable:{...Ze.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ze.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function vs(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=c.useRef(!1),{x:a,y:l}=typeof s=="boolean"?{x:s,y:s}:s;ie(()=>{if(!a&&!l||!t){o.current=!1;return}if(o.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),g=sn(f,r);if(a||(g.x=0),l||(g.y=0),o.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const p=an(u);p&&p.scrollBy({top:g.y,left:g.x})}},[t,a,l,r,n])}const ut=c.createContext({...ae,scaleX:1,scaleY:1});var xe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(xe||(xe={}));const bs=c.memo(function(t){var n,r,s,o;let{id:a,accessibility:l,autoScroll:d=!0,children:u,sensors:f=ds,collisionDetection:g=jr,measuring:p,modifiers:h,...E}=t;const v=c.useReducer(hs,void 0,gs),[x,C]=v,[w,N]=gr(),[D,j]=c.useState(xe.Uninitialized),k=D===xe.Initialized,{draggable:{active:R,nodes:y,translate:T},droppable:{containers:z}}=x,O=R!=null?y.get(R):null,W=c.useRef({initial:null,translated:null}),K=c.useMemo(()=>{var V;return R!=null?{id:R,data:(V=O==null?void 0:O.data)!=null?V:us,rect:W}:null},[R,O]),q=c.useRef(null),[ne,S]=c.useState(null),[b,M]=c.useState(null),A=Xe(E,Object.values(E)),F=Ke("DndDescribedBy",a),U=c.useMemo(()=>z.getEnabled(),[z]),_=ps(p),{droppableRects:J,measureDroppableContainers:ue,measuringScheduled:Ce}=Zr(U,{dragging:k,dependencies:[T.x,T.y],config:_.droppable}),G=Jr(y,R),m=c.useMemo(()=>b?rt(b):null,[b]),I=Tn(),Q=es(G,_.draggable.measure);vs({activeNode:R!=null?y.get(R):null,config:I.layoutShiftCompensation,initialRect:Q,measure:_.draggable.measure});const P=Vt(G,_.draggable.measure,Q),Oe=Vt(G?G.parentElement:null),le=c.useRef({activatorEvent:null,active:null,activeNode:G,collisionRect:null,collisions:null,droppableRects:J,draggableNodes:y,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ne=z.getNodeFor((n=le.current.over)==null?void 0:n.id),fe=cs({measure:_.dragOverlay.measure}),Se=(r=fe.nodeRef.current)!=null?r:G,De=k?(s=fe.rect)!=null?s:P:null,Mt=!!(fe.nodeRef.current&&fe.rect),Ot=rs(Mt?null:P),ft=pn(Se?H(Se):null),he=ss(k?Ne??G:null),He=ls(he),qe=yn(h,{transform:{x:T.x-Ot.x,y:T.y-Ot.y,scaleX:1,scaleY:1},activatorEvent:b,active:K,activeNodeRect:P,containerNodeRect:Oe,draggingNodeRect:De,over:le.current.over,overlayNodeRect:fe.rect,scrollableAncestors:he,scrollableAncestorRects:He,windowRect:ft}),Lt=m?Ie(m,T):null,Tt=os(he),En=qt(Tt),In=qt(Tt,[P]),je=Ie(qe,En),Re=De?Ir(De,qe):null,Le=K&&Re?g({active:K,collisionRect:Re,droppableRects:J,droppableContainers:U,pointerCoordinates:Lt}):null,zt=Nr(Le,"id"),[me,Pt]=c.useState(null),kn=Mt?qe:Ie(qe,In),An=Rr(kn,(o=me==null?void 0:me.rect)!=null?o:null,P),gt=c.useRef(null),_t=c.useCallback((V,Z)=>{let{sensor:ee,options:pe}=Z;if(q.current==null)return;const re=y.get(q.current);if(!re)return;const te=V.nativeEvent,ce=new ee({active:q.current,activeNode:re,event:te,options:pe,context:le,onAbort(Y){if(!y.get(Y))return;const{onDragAbort:de}=A.current,ge={id:Y};de==null||de(ge),w({type:"onDragAbort",event:ge})},onPending(Y,ve,de,ge){if(!y.get(Y))return;const{onDragPending:ze}=A.current,be={id:Y,constraint:ve,initialCoordinates:de,offset:ge};ze==null||ze(be),w({type:"onDragPending",event:be})},onStart(Y){const ve=q.current;if(ve==null)return;const de=y.get(ve);if(!de)return;const{onDragStart:ge}=A.current,Te={activatorEvent:te,active:{id:ve,data:de.data,rect:W}};_e.unstable_batchedUpdates(()=>{ge==null||ge(Te),j(xe.Initializing),C({type:B.DragStart,initialCoordinates:Y,active:ve}),w({type:"onDragStart",event:Te}),S(gt.current),M(te)})},onMove(Y){C({type:B.DragMove,coordinates:Y})},onEnd:Ee(B.DragEnd),onCancel:Ee(B.DragCancel)});gt.current=ce;function Ee(Y){return async function(){const{active:de,collisions:ge,over:Te,scrollAdjustedTranslate:ze}=le.current;let be=null;if(de&&ze){const{cancelDrop:Pe}=A.current;be={activatorEvent:te,active:de,collisions:ge,delta:ze,over:Te},Y===B.DragEnd&&typeof Pe=="function"&&await Promise.resolve(Pe(be))&&(Y=B.DragCancel)}q.current=null,_e.unstable_batchedUpdates(()=>{C({type:Y}),j(xe.Uninitialized),Pt(null),S(null),M(null),gt.current=null;const Pe=Y===B.DragEnd?"onDragEnd":"onDragCancel";if(be){const ht=A.current[Pe];ht==null||ht(be),w({type:Pe,event:be})}})}}},[y]),Mn=c.useCallback((V,Z)=>(ee,pe)=>{const re=ee.nativeEvent,te=y.get(pe);if(q.current!==null||!te||re.dndKit||re.defaultPrevented)return;const ce={active:te};V(ee,Z.options,ce)===!0&&(re.dndKit={capturedBy:Z.sensor},q.current=pe,_t(ee,Z))},[y,_t]),$t=Qr(f,Mn);is(f),ie(()=>{P&&D===xe.Initializing&&j(xe.Initialized)},[P,D]),c.useEffect(()=>{const{onDragMove:V}=A.current,{active:Z,activatorEvent:ee,collisions:pe,over:re}=le.current;if(!Z||!ee)return;const te={active:Z,activatorEvent:ee,collisions:pe,delta:{x:je.x,y:je.y},over:re};_e.unstable_batchedUpdates(()=>{V==null||V(te),w({type:"onDragMove",event:te})})},[je.x,je.y]),c.useEffect(()=>{const{active:V,activatorEvent:Z,collisions:ee,droppableContainers:pe,scrollAdjustedTranslate:re}=le.current;if(!V||q.current==null||!Z||!re)return;const{onDragOver:te}=A.current,ce=pe.get(zt),Ee=ce&&ce.rect.current?{id:ce.id,rect:ce.rect.current,data:ce.data,disabled:ce.disabled}:null,Y={active:V,activatorEvent:Z,collisions:ee,delta:{x:re.x,y:re.y},over:Ee};_e.unstable_batchedUpdates(()=>{Pt(Ee),te==null||te(Y),w({type:"onDragOver",event:Y})})},[zt]),ie(()=>{le.current={activatorEvent:b,active:K,activeNode:G,collisionRect:Re,collisions:Le,droppableRects:J,draggableNodes:y,draggingNode:Se,draggingNodeRect:De,droppableContainers:z,over:me,scrollableAncestors:he,scrollAdjustedTranslate:je},W.current={initial:De,translated:Re}},[K,G,Le,Re,y,Se,De,J,z,me,he,je]),Hr({...I,delta:T,draggingRect:Re,pointerCoordinates:Lt,scrollableAncestors:he,scrollableAncestorRects:He});const On=c.useMemo(()=>({active:K,activeNode:G,activeNodeRect:P,activatorEvent:b,collisions:Le,containerNodeRect:Oe,dragOverlay:fe,draggableNodes:y,droppableContainers:z,droppableRects:J,over:me,measureDroppableContainers:ue,scrollableAncestors:he,scrollableAncestorRects:He,measuringConfiguration:_,measuringScheduled:Ce,windowRect:ft}),[K,G,P,b,Le,Oe,fe,y,z,J,me,ue,he,He,_,Ce,ft]),Ln=c.useMemo(()=>({activatorEvent:b,activators:$t,active:K,activeNodeRect:P,ariaDescribedById:{draggable:F},dispatch:C,draggableNodes:y,over:me,measureDroppableContainers:ue}),[b,$t,K,P,C,F,y,me,ue]);return $.createElement(rn.Provider,{value:N},$.createElement(Ve.Provider,{value:Ln},$.createElement(xn.Provider,{value:On},$.createElement(ut.Provider,{value:An},u)),$.createElement(ms,{disabled:(l==null?void 0:l.restoreFocus)===!1})),$.createElement(pr,{...l,hiddenTextDescribedById:F}));function Tn(){const V=(ne==null?void 0:ne.autoScrollEnabled)===!1,Z=typeof d=="object"?d.enabled===!1:d===!1,ee=k&&!V&&!Z;return typeof d=="object"?{...d,enabled:ee}:{enabled:ee}}}),xs=c.createContext(null),Jt="button",ys="Draggable";function ws(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=Ke(ys),{activators:a,activatorEvent:l,active:d,activeNodeRect:u,ariaDescribedById:f,draggableNodes:g,over:p}=c.useContext(Ve),{role:h=Jt,roleDescription:E="draggable",tabIndex:v=0}=s??{},x=(d==null?void 0:d.id)===t,C=c.useContext(x?ut:xs),[w,N]=et(),[D,j]=et(),k=as(a,t),R=Xe(n);ie(()=>(g.set(t,{id:t,key:o,node:w,activatorNode:D,data:R}),()=>{const T=g.get(t);T&&T.key===o&&g.delete(t)}),[g,t]);const y=c.useMemo(()=>({role:h,tabIndex:v,"aria-disabled":r,"aria-pressed":x&&h===Jt?!0:void 0,"aria-roledescription":E,"aria-describedby":f.draggable}),[r,h,v,x,E,f.draggable]);return{active:d,activatorEvent:l,activeNodeRect:u,attributes:y,isDragging:x,listeners:r?void 0:k,node:w,over:p,setNodeRef:N,setActivatorNodeRef:j,transform:C}}function wn(){return c.useContext(xn)}const Cs="Droppable",Ns={timeout:25};function Cn(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=Ke(Cs),{active:a,dispatch:l,over:d,measureDroppableContainers:u}=c.useContext(Ve),f=c.useRef({disabled:n}),g=c.useRef(!1),p=c.useRef(null),h=c.useRef(null),{disabled:E,updateMeasurementsFor:v,timeout:x}={...Ns,...s},C=Xe(v??r),w=c.useCallback(()=>{if(!g.current){g.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(C.current)?C.current:[C.current]),h.current=null},x)},[x]),N=dt({callback:w,disabled:E||!a}),D=c.useCallback((y,T)=>{N&&(T&&(N.unobserve(T),g.current=!1),y&&N.observe(y))},[N]),[j,k]=et(D),R=Xe(t);return c.useEffect(()=>{!N||!j.current||(N.disconnect(),g.current=!1,N.observe(j.current))},[j,N]),c.useEffect(()=>(l({type:B.RegisterDroppable,element:{id:r,key:o,disabled:n,node:j,rect:p,data:R}}),()=>l({type:B.UnregisterDroppable,key:o,id:r})),[r]),c.useEffect(()=>{n!==f.current.disabled&&(l({type:B.SetDroppableDisabled,id:r,key:o,disabled:n}),f.current.disabled=n)},[r,o,n,l]),{active:a,rect:p,isOver:(d==null?void 0:d.id)===r,node:j,over:d,setNodeRef:k}}function Ss(e){let{animation:t,children:n}=e;const[r,s]=c.useState(null),[o,a]=c.useState(null),l=tt(n);return!n&&!r&&l&&s(l),ie(()=>{if(!o)return;const d=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(d==null||u==null){s(null);return}Promise.resolve(t(u,o)).then(()=>{s(null)})},[t,r,o]),$.createElement($.Fragment,null,n,r?c.cloneElement(r,{ref:a}):null)}const Ds={x:0,y:0,scaleX:1,scaleY:1};function js(e){let{children:t}=e;return $.createElement(Ve.Provider,{value:bn},$.createElement(ut.Provider,{value:Ds},t))}const Rs={position:"fixed",touchAction:"none"},Es=e=>ct(e)?"transform 250ms ease":void 0,Is=c.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:a,rect:l,style:d,transform:u,transition:f=Es}=e;if(!l)return null;const g=s?u:{...u,scaleX:1,scaleY:1},p={...Rs,width:l.width,height:l.height,top:l.top,left:l.left,transform:ye.Transform.toString(g),transformOrigin:s&&r?yr(r,l):void 0,transition:typeof f=="function"?f(r):f,...d};return $.createElement(n,{className:a,style:p,ref:t},o)}),ks=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:o,className:a}=e;if(o!=null&&o.active)for(const[l,d]of Object.entries(o.active))d!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,d));if(o!=null&&o.dragOverlay)for(const[l,d]of Object.entries(o.dragOverlay))d!==void 0&&r.node.style.setProperty(l,d);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[d,u]of Object.entries(s))n.node.style.setProperty(d,u);a!=null&&a.active&&n.node.classList.remove(a.active)}},As=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:ye.Transform.toString(t)},{transform:ye.Transform.toString(n)}]},Ms={duration:250,easing:"ease",keyframes:As,sideEffects:ks({styles:{active:{opacity:"0"}}})};function Os(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return lt((o,a)=>{if(t===null)return;const l=n.get(o);if(!l)return;const d=l.node.current;if(!d)return;const u=vn(a);if(!u)return;const{transform:f}=H(a).getComputedStyle(a),g=on(f);if(!g)return;const p=typeof t=="function"?t:Ls(t);return gn(d,s.draggable.measure),p({active:{id:o,data:l.data,node:d,rect:s.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:g})})}function Ls(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...Ms,...e};return o=>{let{active:a,dragOverlay:l,transform:d,...u}=o;if(!t)return;const f={x:l.rect.left-a.rect.left,y:l.rect.top-a.rect.top},g={scaleX:d.scaleX!==1?a.rect.width*d.scaleX/l.rect.width:1,scaleY:d.scaleY!==1?a.rect.height*d.scaleY/l.rect.height:1},p={x:d.x-f.x,y:d.y-f.y,...g},h=s({...u,active:a,dragOverlay:l,transform:{initial:d,final:p}}),[E]=h,v=h[h.length-1];if(JSON.stringify(E)===JSON.stringify(v))return;const x=r==null?void 0:r({active:a,dragOverlay:l,...u}),C=l.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(w=>{C.onfinish=()=>{x==null||x(),w()}})}}let Qt=0;function Ts(e){return c.useMemo(()=>{if(e!=null)return Qt++,Qt},[e])}const zs=$.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:a,wrapperElement:l="div",className:d,zIndex:u=999}=e;const{activatorEvent:f,active:g,activeNodeRect:p,containerNodeRect:h,draggableNodes:E,droppableContainers:v,dragOverlay:x,over:C,measuringConfiguration:w,scrollableAncestors:N,scrollableAncestorRects:D,windowRect:j}=wn(),k=c.useContext(ut),R=Ts(g==null?void 0:g.id),y=yn(a,{activatorEvent:f,active:g,activeNodeRect:p,containerNodeRect:h,draggingNodeRect:x.rect,over:C,overlayNodeRect:x.rect,scrollableAncestors:N,scrollableAncestorRects:D,transform:k,windowRect:j}),T=At(p),z=Os({config:r,draggableNodes:E,droppableContainers:v,measuringConfiguration:w}),O=T?x.setRef:void 0;return $.createElement(js,null,$.createElement(Ss,{animation:z},g&&R?$.createElement(Is,{key:R,id:g.id,ref:O,as:l,activatorEvent:f,adjustScale:t,className:d,transition:o,rect:T,style:{zIndex:u,...s},transform:y},n):null))});function Nn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Ps(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function Ge(e){return e!==null&&e>=0}function _s(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function $s(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Sn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=Nn(t,r,n),a=t[s],l=o[s];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},Je={scaleX:1,scaleY:1},Fs=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:a}=e;const l=(t=o[n])!=null?t:r;if(!l)return null;if(s===n){const u=o[a];return u?{x:0,y:n<a?u.top+u.height-(l.top+l.height):u.top-l.top,...Je}:null}const d=Bs(o,s,n);return s>n&&s<=a?{x:0,y:-l.height-d,...Je}:s<n&&s>=a?{x:0,y:l.height+d,...Je}:{x:0,y:0,...Je}};function Bs(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Dn="Sortable",jn=$.createContext({activeIndex:-1,containerId:Dn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Sn,disabled:{draggable:!1,droppable:!1}});function Xs(e){let{children:t,id:n,items:r,strategy:s=Sn,disabled:o=!1}=e;const{active:a,dragOverlay:l,droppableRects:d,over:u,measureDroppableContainers:f}=wn(),g=Ke(Dn,n),p=l.rect!==null,h=c.useMemo(()=>r.map(k=>typeof k=="object"&&"id"in k?k.id:k),[r]),E=a!=null,v=a?h.indexOf(a.id):-1,x=u?h.indexOf(u.id):-1,C=c.useRef(h),w=!_s(h,C.current),N=x!==-1&&v===-1||w,D=$s(o);ie(()=>{w&&E&&f(h)},[w,h,E,f]),c.useEffect(()=>{C.current=h},[h]);const j=c.useMemo(()=>({activeIndex:v,containerId:g,disabled:D,disableTransforms:N,items:h,overIndex:x,useDragOverlay:p,sortedRects:Ps(h,d),strategy:s}),[v,g,D.draggable,D.droppable,N,h,x,d,p,s]);return $.createElement(jn.Provider,{value:j},t)}const Us=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return Nn(n,r,s).indexOf(t)},Ys=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:a,previousItems:l,previousContainerId:d,transition:u}=e;return!u||!r||l!==o&&s===a?!1:n?!0:a!==s&&t===d},Ws={duration:200,easing:"ease"},Rn="transform",Ks=ye.Transition.toString({property:Rn,duration:0,easing:"linear"}),Vs={roleDescription:"sortable"};function Hs(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,a]=c.useState(null),l=c.useRef(n);return ie(()=>{if(!t&&n!==l.current&&r.current){const d=s.current;if(d){const u=Me(r.current,{ignoreTransform:!0}),f={x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height};(f.x||f.y)&&a(f)}}n!==l.current&&(l.current=n)},[t,n,r,s]),c.useEffect(()=>{o&&a(null)},[o]),o}function qs(e){let{animateLayoutChanges:t=Ys,attributes:n,disabled:r,data:s,getNewIndex:o=Us,id:a,strategy:l,resizeObserverConfig:d,transition:u=Ws}=e;const{items:f,containerId:g,activeIndex:p,disabled:h,disableTransforms:E,sortedRects:v,overIndex:x,useDragOverlay:C,strategy:w}=c.useContext(jn),N=Gs(r,h),D=f.indexOf(a),j=c.useMemo(()=>({sortable:{containerId:g,index:D,items:f},...s}),[g,s,D,f]),k=c.useMemo(()=>f.slice(f.indexOf(a)),[f,a]),{rect:R,node:y,isOver:T,setNodeRef:z}=Cn({id:a,data:j,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:k,...d}}),{active:O,activatorEvent:W,activeNodeRect:K,attributes:q,setNodeRef:ne,listeners:S,isDragging:b,over:M,setActivatorNodeRef:A,transform:F}=ws({id:a,data:j,attributes:{...Vs,...n},disabled:N.draggable}),U=rr(z,ne),_=!!O,J=_&&!E&&Ge(p)&&Ge(x),ue=!C&&b,Ce=ue&&J?F:null,m=J?Ce??(l??w)({rects:v,activeNodeRect:K,activeIndex:p,overIndex:x,index:D}):null,I=Ge(p)&&Ge(x)?o({id:a,items:f,activeIndex:p,overIndex:x}):D,Q=O==null?void 0:O.id,P=c.useRef({activeId:Q,items:f,newIndex:I,containerId:g}),Oe=f!==P.current.items,le=t({active:O,containerId:g,isDragging:b,isSorting:_,id:a,index:D,items:f,newIndex:P.current.newIndex,previousItems:P.current.items,previousContainerId:P.current.containerId,transition:u,wasDragging:P.current.activeId!=null}),Ne=Hs({disabled:!le,index:D,node:y,rect:R});return c.useEffect(()=>{_&&P.current.newIndex!==I&&(P.current.newIndex=I),g!==P.current.containerId&&(P.current.containerId=g),f!==P.current.items&&(P.current.items=f)},[_,I,g,f]),c.useEffect(()=>{if(Q===P.current.activeId)return;if(Q!=null&&P.current.activeId==null){P.current.activeId=Q;return}const Se=setTimeout(()=>{P.current.activeId=Q},50);return()=>clearTimeout(Se)},[Q]),{active:O,activeIndex:p,attributes:q,data:j,rect:R,index:D,newIndex:I,items:f,isOver:T,isSorting:_,isDragging:b,listeners:S,node:y,overIndex:x,over:M,setNodeRef:U,setActivatorNodeRef:A,setDroppableNodeRef:z,setDraggableNodeRef:ne,transform:Ne??m,transition:fe()};function fe(){if(Ne||Oe&&P.current.newIndex===D)return Ks;if(!(ue&&!ct(W)||!u)&&(_||le))return ye.Transition.toString({...u,property:Rn})}}function Gs(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}L.Down,L.Right,L.Up,L.Left;const Js=c.lazy(()=>_n(()=>import("./index.es-54330XTT.js"),__vite__mapDeps([0,1,2,3])));function it(e){if(!e)return"No date set";const t=new Date(e);if(isNaN(t.getTime()))return"Invalid date";const n=t.getDate(),r=t.toLocaleString("en-US",{month:"long"}),s=t.getFullYear();let o="th";return n===1||n===21||n===31?o="st":n===2||n===22?o="nd":(n===3||n===23)&&(o="rd"),`${n}${o} ${r} ${s}`}function yt(e){return e?typeof e=="string"?/^\d{4}-\d{2}-\d{2}$/.test(e)?e:e.includes("T")?e.split("T")[0]:"":e instanceof Date&&!isNaN(e.getTime())?e.toISOString().split("T")[0]:"":""}function Qs(e){return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}function Zs({card:e,listTitle:t,onClick:n}){const{setNodeRef:r,attributes:s,listeners:o,transform:a,transition:l}=qs({id:e.id}),d={transform:ye.Transform.toString(a),transition:l},f=`${e.invoice||`ID-${e.id}`} ${e.first_name||""} ${e.last_name||""}`.trim();return i.jsx("div",{ref:r,style:d,...s,...o,onClick:()=>n(e),className:"bg-white rounded-xl border border-gray-200 px-3 py-2.5 shadow-sm cursor-pointer hover:shadow-md transition-shadow select-none",children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-bold text-indigo-700",children:f}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:it(e.created_at)})]}),i.jsx("button",{className:"p-1.5 rounded-md hover:bg-gray-100 shrink-0",children:i.jsx(en,{size:16,className:"text-gray-600"})})]})})}function eo({list:e,children:t}){const{setNodeRef:n}=Cn({id:`list-${e.id}`});return i.jsx("div",{ref:n,className:"w-80 bg-white/90 backdrop-blur-sm rounded-xl border border-gray-200 shadow-md flex flex-col min-h-[120px]",children:t})}function to({card:e,listTitle:t,onClose:n,setSelectedCard:r,fetchBoard:s}){const[o,a]=c.useState(!1),[l,d]=c.useState(null),[u,f]=c.useState(null),[g,p]=c.useState([]),[h,E]=c.useState([]),[v,x]=c.useState(!1),[C,w]=c.useState(!1),[N,D]=c.useState(e.description||""),[j,k]=c.useState(!1),[R,y]=c.useState(!1),[T,z]=c.useState(yt(e.due_date)),[O,W]=c.useState(!1),[K,q]=c.useState([]),[ne,S]=c.useState(""),[b,M]=c.useState(!1);c.useEffect(()=>{d(e.country_label_id??null),f(e.intake_label_id??null),D(e.description||""),z(yt(e.due_date)),A()},[e]),c.useEffect(()=>{(async()=>{if(!(g.length>0&&h.length>0))try{const[I,Q]=await Promise.all([se.get("/country-labels"),se.get("/intake-labels")]);p(I.data),E(Q.data)}catch(I){console.error("Failed to preload labels",I)}})()},[g.length,h.length]);const A=async()=>{try{const m=await se.get(`/cards/${e.id}/activities`);q(m.data||[])}catch(m){console.error("Failed to fetch activities:",m)}},F=async()=>{if(ne.trim()){M(!0);try{await se.post(`/cards/${e.id}/activities`,{action:"commented",details:ne.trim()}),S(""),await A()}catch(m){console.error("Failed to post comment:",m),alert("Could not post comment.")}finally{M(!1)}}},U=async()=>{try{const m={country_label_id:l??null,intake_label_id:u??null};await se.put(`/cards/${e.id}/labels`,m),r(I=>I&&I.id===e.id?{...I,...m}:I),await s(),await A(),a(!1)}catch(m){console.error("Failed to save labels:",m),alert("Could not save labels. Please try again.")}},_=async()=>{const m=N.trim();if(m===(e.description||"")){w(!1);return}k(!0);try{await se.put(`/cards/${e.id}/description`,{description:m||null}),r(I=>I&&I.id===e.id?{...I,description:m||void 0}:I),await s(),await A(),w(!1)}catch(I){console.error("Failed to save description:",I),alert("Could not save description.")}finally{k(!1)}},J=async()=>{W(!0);try{const m=T.trim()||null;await se.put(`/cards/${e.id}/due-date`,{due_date:m}),r(I=>I&&I.id===e.id?{...I,due_date:m??void 0}:I),await s(),await A(),y(!1)}catch(m){console.error("Failed to save due date:",m),alert("Could not save due date."),await s()}finally{W(!1)}},ue=()=>{y(!0)},Ce=()=>{var m;return((m=g.find(I=>I.id===l))==null?void 0:m.name)||"None"},G=()=>{var m;return((m=h.find(I=>I.id===u))==null?void 0:m.name)||"None"};return i.jsxs("div",{className:"fixed inset-0 bg-black/65 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-2xl shadow-2xl overflow-hidden max-h-[92vh] flex flex-col border border-gray-200/50",children:[i.jsxs("div",{className:"px-6 py-4 border-b bg-gradient-to-r from-indigo-50/60 to-white flex items-start justify-between gap-6",children:[i.jsx("div",{className:"flex-1 min-w-0 space-y-1",children:i.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-indigo-100/80 text-indigo-800 rounded-lg text-sm font-semibold border border-indigo-200 shadow-sm",children:t})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"h-9 w-9 flex items-center justify-center rounded-lg border border-gray-200 bg-white hover:bg-gray-50",children:i.jsx(Bn,{size:17,className:"text-gray-600"})}),i.jsx("button",{className:"h-9 w-9 flex items-center justify-center rounded-lg border border-gray-200 bg-white hover:bg-gray-50",children:i.jsx(Hn,{size:17,className:"text-gray-600"})}),i.jsx("button",{className:"h-9 w-9 flex items-center justify-center rounded-lg border border-gray-200 bg-white hover:bg-gray-50",children:i.jsx(nr,{size:17,className:"text-gray-600"})}),i.jsx("button",{className:"h-9 w-9 flex items-center justify-center rounded-lg border border-gray-200 bg-white hover:bg-gray-50",children:i.jsx(wt,{size:17,className:"text-gray-600"})}),i.jsx("button",{onClick:n,className:"h-9 w-9 flex items-center justify-center rounded-lg border border-red-200 bg-red-50 text-red-600 hover:bg-red-100",children:i.jsx(mt,{size:18})})]})]}),i.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-7 bg-white",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 truncate leading-tight",children:[e.invoice||"28223"," ",e.first_name," ",e.last_name,"  ",it(e.created_at)]}),i.jsx("div",{className:"flex flex-wrap gap-2.5",children:[{Icon:Qe,label:"Add"},{Icon:Un,label:"Dates",onClick:ue},{Icon:er,label:"Checklist"},{Icon:Zt,label:"Members"},{Icon:Qn,label:"Attachment"}].map(({Icon:m,label:I,onClick:Q})=>i.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-300 active:bg-gray-100 transition-all",children:[i.jsx(m,{size:16,className:"text-gray-600"}),I]},I))}),i.jsxs("div",{className:"flex flex-wrap gap-10",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2.5",children:"Labels"}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-md text-sm font-medium",children:Ce()})}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-md text-sm font-medium",children:G()})}),i.jsx("button",{onClick:()=>a(!0),className:"h-8 w-8 flex items-center justify-center border border-gray-300 rounded-md text-gray-600 hover:bg-gray-50 transition",children:"+"})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2.5",children:"Due Date"}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("span",{className:"bg-indigo-50 text-indigo-800 px-3 py-1 rounded-md text-sm font-medium",children:e.due_date?it(e.due_date):"Not set"})})]})]}),i.jsxs("div",{className:"bg-gray-50/70 border border-gray-200 rounded-xl overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between px-5 py-3.5 border-b bg-white/60",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx(Gn,{size:18,className:"text-indigo-600"}),i.jsx("h3",{className:"font-semibold text-gray-800",children:"Description"})]}),C?i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{w(!1),D(e.description||"")},className:"px-4 py-1.5 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",disabled:j,children:"Cancel"}),i.jsx("button",{onClick:_,className:`px-5 py-1.5 text-sm font-medium rounded text-white ${j?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,disabled:j,children:j?"Saving...":"Save"})]}):i.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-1.5 text-sm text-indigo-600 hover:text-indigo-800 font-medium transition",children:[i.jsx(en,{size:14}),"Edit"]})]}),C?i.jsx("div",{className:"p-5",children:i.jsx("textarea",{value:N,onChange:m=>D(m.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm resize-y min-h-[160px] focus:outline-none focus:ring-2 focus:ring-indigo-400 transition",placeholder:"Students Phone, Parents Phone, Budget, Education level, Field of study, Notes...",autoFocus:!0})}):i.jsx("div",{className:"px-5 py-5 text-sm text-gray-800 space-y-2 leading-relaxed",children:e.description&&e.description.trim()?e.description.split(`
`).map((m,I)=>i.jsx("p",{children:m},I)):i.jsx("p",{className:"text-gray-500 italic",children:"No description added yet..."})})]})]}),i.jsxs("div",{className:"w-full sm:w-[360px] bg-gray-50 border-l border-gray-200 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"px-5 py-4 border-b bg-white/80 flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold text-gray-800",children:"Comments & Activity"}),i.jsx("button",{className:"text-sm px-3 py-1.5 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition",children:"Show details"})]}),i.jsxs("div",{className:"flex-1 p-5 space-y-6 overflow-y-auto",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:ne,onChange:m=>S(m.target.value),placeholder:"Write a comment...",className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm resize-none h-28 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition"}),i.jsx("button",{onClick:F,disabled:b||!ne.trim(),className:`w-full py-2 text-sm font-medium rounded-lg text-white ${b?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:b?"Posting...":"Post Comment"})]}),i.jsx("div",{className:"space-y-6",children:K.length===0?i.jsx("p",{className:"text-center text-gray-500",children:"No activities yet"}):K.map(m=>i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"w-9 h-9 bg-teal-600 text-white rounded-full flex items-center justify-center font-bold text-sm shrink-0",children:m.user_name.charAt(0).toUpperCase()}),i.jsxs("div",{className:"flex-1 space-y-1.5",children:[i.jsxs("p",{className:"text-sm leading-relaxed",children:[i.jsx("strong",{className:"text-gray-900",children:m.user_name})," ",m.action,m.details?` ${m.details}`:""]}),i.jsx("p",{className:"text-xs text-gray-500",children:Qs(m.created_at)}),m.action==="commented"&&m.details&&i.jsx("div",{className:"mt-2 bg-white border border-gray-200 rounded-lg p-3 text-sm text-gray-700",children:m.details}),i.jsx("button",{className:"text-xs text-gray-500 hover:text-gray-700 underline mt-1 transition",children:"Reply"})]})]},m.id))})]})]})]})]}),R&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Due Date"}),i.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-700",children:i.jsx(mt,{size:20})})]}),i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"py-8 text-center text-gray-500",children:"Loading calendar..."}),children:i.jsx(Js,{selected:T?new Date(T):null,onChange:m=>{z(m?m.toISOString().split("T")[0]:"")},className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-base focus:outline-none focus:ring-2 focus:ring-indigo-400 mb-4",placeholderText:"Select a date",dateFormat:"yyyy-MM-dd",autoFocus:!0})}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{y(!1),z(yt(e.due_date))},className:"px-5 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",disabled:O,children:"Cancel"}),i.jsx("button",{onClick:J,className:`px-6 py-2 text-sm font-medium text-white rounded-lg ${O?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,disabled:O,children:O?"Saving...":"Save Date"})]})]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60] p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[85vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Select Labels"}),i.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",children:i.jsx(mt,{size:24})})]}),i.jsx("div",{className:"p-6 flex-1 overflow-y-auto space-y-8",children:v?i.jsx("div",{className:"text-center py-10 text-gray-500",children:"Loading labels..."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),i.jsxs("select",{value:l??"",onChange:m=>d(m.target.value?Number(m.target.value):null),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:"Select a country (optional)"}),g.map(m=>i.jsx("option",{value:m.id,children:m.name},m.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intake / Semester"}),i.jsxs("select",{value:u??"",onChange:m=>f(m.target.value?Number(m.target.value):null),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:"Select an intake (optional)"}),h.map(m=>i.jsx("option",{value:m.id,children:m.name},m.id))]})]})]})}),i.jsxs("div",{className:"p-5 border-t flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>a(!1),className:"px-6 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),i.jsx("button",{onClick:U,className:"px-6 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Save"})]})]})})]})}function go(){const{boardId:e}=zn(),[t,n]=c.useState(null),[r,s]=c.useState(!0),[o,a]=c.useState(null),[l,d]=c.useState(null),[u,f]=c.useState(null),[g,p]=c.useState(!1),[h,E]=c.useState(""),[v,x]=c.useState(null),[C,w]=c.useState(""),[N,D]=c.useState(""),[j,k]=c.useState(""),R=br(vr(kt,{activationConstraint:{distance:6}})),y=async()=>{try{const S=await se.get(`/boards/${e}`,{params:{with:"lists.cards"}}),b=S.data.data||S.data;b.lists=[...b.lists||[]].sort((M,A)=>M.position-A.position),b.lists.forEach(M=>{M.cards=[...M.cards||[]].sort((A,F)=>A.position-F.position)}),n(b)}catch(S){console.error("Fetch board failed",S)}};c.useEffect(()=>{(async()=>{s(!0);try{const[,b]=await Promise.all([y(),Pn()]);a(b)}finally{s(!1)}})()},[e]);const T=S=>{if(!t)return"Unknown";const b=t.lists.find(M=>M.id===S.board_list_id);return(b==null?void 0:b.title)||"Unknown"},z=async(S,b,M,A)=>{try{await se.post("/activities",{card_id:M??null,list_id:A??null,action:S,details:b})}catch(F){console.error("Failed to log activity:",F)}},O=async()=>{if(!h.trim()||!t)return;const S=t.lists.length+1,b={id:Date.now(),board_id:t.id,title:h.trim(),position:S,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),cards:[]};n(M=>M?{...M,lists:[...M.lists,b]}:null),E(""),p(!1);try{const A=(await se.post(`/boards/${t.id}/lists`,{title:b.title,position:S})).data.id;await z("created list",`List: ${b.title}`,void 0,A),await y()}catch(M){console.error("Create list failed",M),await y()}},W=async S=>{const b={first_name:C.trim()||void 0,last_name:N.trim()||void 0,description:j.trim()||void 0};try{const A=(await se.post(`/board-lists/${S}/cards`,b)).data.id;await z("created card",`Card: ${b.first_name} ${b.last_name}`,A),w(""),D(""),k(""),x(null),await y()}catch(M){console.error("Create card failed",M)}},K=()=>{w(""),D(""),k(""),x(null)},q=S=>{if(!t)return;const b=Number(S.active.id);for(const M of t.lists){const A=M.cards.find(F=>F.id===b);if(A){f(A);break}}},ne=async S=>{if(f(null),!t||!S.over)return;const b=Number(S.active.id);let M,A;for(const U of t.lists){const _=U.cards.find(J=>J.id===b);if(_){M=U,A=_;break}}if(!M||!A)return;let F;if(String(S.over.id).startsWith("list-")){const U=Number(String(S.over.id).replace("list-",""));F=t.lists.find(_=>_.id===U)}else F=t.lists.find(U=>U.cards.some(_=>_.id===Number(S.over.id)));if(!(!F||M.id===F.id)){M.cards=M.cards.filter(U=>U.id!==A.id),A.position=F.cards.length+1,F.cards.push(A),n({...t});try{await se.post("/cards/move",{card_id:A.id,to_list_id:F.id,position:A.position}),await z("moved card",`from ${M.title} to ${F.title}`,A.id),await y()}catch(U){console.error("Move card failed",U),await y()}}};return r?i.jsx($n,{message:"Loading board..."}):t?i.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 overflow-hidden",children:[i.jsxs("header",{className:"h-14 bg-white border-b shadow-sm flex items-center justify-between px-4 gap-4",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsx("div",{className:"h-8 flex items-center",children:i.jsx("img",{src:"/images/logo/connected_logo.png",alt:"Connected Logo",className:"h-8 w-auto object-contain"})})}),i.jsx("div",{className:"flex-1 max-w-2xl mx-6",children:i.jsx("input",{placeholder:"Search invoices, clients...",className:"w-full h-9 px-4 rounded-lg bg-gray-100 border text-sm focus:ring-2 focus:ring-indigo-400/40 outline-none"})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-1.5 px-4 py-1.5 bg-gradient-to-r from-indigo-600 to-blue-600 text-white text-sm rounded-lg shadow-md",children:[i.jsx(Qe,{size:16})," New List"]}),i.jsx("div",{className:"h-8 px-3 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm font-semibold flex items-center justify-center shadow-sm",children:(o==null?void 0:o.first_name)||"User"})]})]}),i.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 rounded-xl shadow-inner m-4",children:[i.jsxs("div",{className:"h-16 bg-gradient-to-r from-purple-700 via-indigo-700 to-purple-800 text-white flex items-center justify-between px-6 rounded-t-xl",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Fn,{size:20}),i.jsx("h1",{className:"text-xl font-bold",children:t.name}),i.jsx(Wn,{size:20})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Zt,{size:20}),i.jsx("button",{className:"px-4 py-1.5 bg-white/20 rounded-lg text-sm",children:"Share"}),i.jsx(wt,{size:20})]})]}),i.jsxs(bs,{sensors:R,collisionDetection:Sr,onDragStart:q,onDragEnd:ne,children:[i.jsx("div",{className:"flex-1 overflow-x-auto p-6",children:i.jsxs("div",{className:"flex gap-6 min-w-max items-start",children:[t.lists.map(S=>i.jsxs(eo,{list:S,children:[i.jsxs("div",{className:"p-4 pb-2",children:[i.jsxs("div",{className:"flex justify-between mb-3",children:[i.jsx("h3",{className:"font-semibold text-lg",children:S.title}),i.jsx(wt,{size:18})]}),i.jsx(Xs,{items:S.cards.map(b=>b.id),strategy:Fs,children:i.jsx("div",{className:"space-y-3",children:S.cards.map(b=>i.jsx(Zs,{card:b,listTitle:S.title,onClick:()=>d(b)},b.id))})})]}),i.jsx("div",{className:"p-3 pt-0",children:v===S.id?i.jsxs("div",{className:"bg-white rounded-lg border p-3 shadow-sm",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[i.jsx("input",{value:C,onChange:b=>w(b.target.value),placeholder:"First name",className:"w-full border rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-400 outline-none"}),i.jsx("input",{value:N,onChange:b=>D(b.target.value),placeholder:"Last name",className:"w-full border rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-400 outline-none"})]}),i.jsx("textarea",{value:j,onChange:b=>k(b.target.value),placeholder:"Description / notes (optional)...",rows:3,className:"w-full border rounded-md px-3 py-2 text-sm resize-none focus:ring-2 focus:ring-indigo-400 outline-none mb-3"}),i.jsxs("div",{className:"flex gap-3 mt-4",children:[i.jsx("button",{onClick:()=>W(S.id),className:"flex-1 bg-indigo-600 text-white py-2 rounded-md text-sm font-medium",children:"Add card"}),i.jsx("button",{onClick:K,className:"flex-1 bg-gray-200 text-gray-800 py-2 rounded-md text-sm font-medium hover:bg-gray-300",children:"Cancel"})]})]}):i.jsxs("button",{onClick:()=>x(S.id),className:"w-full flex items-center gap-2 text-gray-600 hover:bg-gray-100 rounded-lg px-2 py-2 text-sm",children:[i.jsx(Qe,{size:16})," Add a card"]})})]},S.id)),i.jsx("div",{className:"w-80 shrink-0",children:g?i.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-md",children:[i.jsx("input",{autoFocus:!0,value:h,onChange:S=>E(S.target.value),placeholder:"Enter list title...",className:"w-full border rounded-md px-3 py-2 text-sm"}),i.jsxs("div",{className:"flex gap-3 mt-3",children:[i.jsx("button",{onClick:O,className:"bg-indigo-600 text-white px-4 py-1.5 rounded-md",children:"Add list"}),i.jsx("button",{onClick:()=>p(!1),className:"text-sm text-gray-600 hover:underline",children:"Cancel"})]})]}):i.jsxs("button",{onClick:()=>p(!0),className:"w-full h-12 bg-white/60 hover:bg-white rounded-xl border border-dashed flex items-center gap-2 justify-center text-gray-600",children:[i.jsx(Qe,{size:16})," Add list"]})})]})}),i.jsx(zs,{children:u&&i.jsxs("div",{className:"w-80 bg-white rounded-xl p-3 shadow-2xl border border-gray-200",children:[i.jsxs("p",{className:"text-sm font-bold text-indigo-700",children:[u.invoice||`ID-${u.id}`," ",u.first_name||""," ",u.last_name||""]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:it(u.created_at)})]})})]}),l&&i.jsx(to,{card:l,listTitle:T(l),onClose:()=>d(null),setSelectedCard:d,fetchBoard:y})]})]}):null}export{go as default};
