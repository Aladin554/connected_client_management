import{r,d as n,y as a,j as e,l as M}from"./index-Co5bbTuF.js";import{P as O}from"./plus-Do2C2VgG.js";import{S as L}from"./square-pen-CeJ8qFct.js";import{T as N}from"./trash-2-roxM8JXs.js";import{X as F}from"./x-kujMzfW9.js";import"./createLucideIcon-D0rn2eoO.js";function P(s){return Array.isArray(s==null?void 0:s.data)?s.data:Array.isArray(s)?s:[]}function X(){const[s,w]=r.useState([]),[S,g]=r.useState(!0),[b,A]=r.useState(""),[C,l]=r.useState(!1),[k,h]=r.useState("Add Service Area"),[d,i]=r.useState({name:""}),[o,c]=r.useState(""),[f,y]=r.useState(!1),[D,x]=r.useState(!1),[p,j]=r.useState(null);r.useEffect(()=>{m()},[]);const m=async()=>{try{g(!0);const t=await n.get("/service-areas");w(P(t.data))}catch{a.error("Failed to fetch service areas")}finally{g(!1)}},E=()=>{i({name:""}),c(""),h("Add Service Area"),l(!0)},T=t=>{i({id:t.id,name:t.name}),c(""),h("Edit Service Area"),l(!0)},I=async t=>{t.preventDefault();const u=d.name.trim();if(!u){c("Name is required.");return}y(!0);try{d.id?(await n.put(`/service-areas/${d.id}`,{name:u}),a.success("Service area updated successfully")):(await n.post("/service-areas",{name:u}),a.success("Service area created successfully")),l(!1),m()}catch{a.error("Error saving service area")}finally{y(!1)}},z=async()=>{if(p)try{await n.delete(`/service-areas/${p}`),a.success("Service area deleted successfully"),m()}catch{a.error("Error deleting service area")}finally{x(!1),j(null)}},v=s.filter(t=>t.name.toLowerCase().includes(b.toLowerCase()));return e.jsxs("div",{className:"p-5 border border-gray-200 rounded-2xl lg:p-6 bg-white relative w-full max-w-[1280px] mx-auto",children:[e.jsx(M,{position:"top-right",autoClose:3e3,hideProgressBar:!0,theme:"colored"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-5 gap-3",children:[e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:"Service Area"}),e.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-5 py-3 rounded-lg bg-blue-600 text-white text-base font-medium shadow-sm hover:bg-blue-700 transition-all",children:[e.jsx(O,{size:20})," Add Service Area"]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by name...",value:b,onChange:t=>A(t.target.value),className:"border border-gray-300 bg-white px-4 py-2 rounded-lg text-base text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-64"})}),e.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200",children:e.jsxs("table",{className:"min-w-full text-base bg-white",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-medium text-gray-700 border-r border-gray-200",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-left font-medium text-gray-700 border-r border-gray-200",children:"Created"}),e.jsx("th",{className:"px-6 py-4 text-left font-medium text-gray-700 border-r border-gray-200",children:"Updated"}),e.jsx("th",{className:"px-6 py-4 text-left font-medium text-gray-700",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:S?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center py-12 text-gray-500",children:"Loading..."})}):v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center py-12 text-gray-500",children:"No service area found"})}):v.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4 border-r border-gray-200 text-gray-800 font-medium",children:t.name}),e.jsx("td",{className:"px-6 py-4 border-r border-gray-200 text-gray-700",children:t.created_at?new Date(t.created_at).toISOString().split("T")[0]:"-"}),e.jsx("td",{className:"px-6 py-4 border-r border-gray-200 text-gray-700",children:t.updated_at?new Date(t.updated_at).toISOString().split("T")[0]:"-"}),e.jsxs("td",{className:"px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>T(t),className:"p-2 bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200 transition",children:e.jsx(L,{size:18})}),e.jsx("button",{onClick:()=>{j(t.id),x(!0)},className:"p-2 bg-red-100 text-red-700 rounded hover:bg-red-200 transition",children:e.jsx(N,{size:18})})]})]},t.id))})]})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:k}),e.jsx("button",{onClick:()=>l(!1),children:e.jsx(F,{className:"w-6 h-6 text-gray-600"})})]}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",value:d.name,onChange:t=>i({...d,name:t.target.value}),className:`w-full border px-3 py-2 rounded-lg text-lg text-gray-800 focus:outline-none focus:ring-2 ${o?"border-red-500 focus:ring-red-500":"focus:ring-blue-500"}`}),o&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-5 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"px-6 py-3 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:f?"Saving...":"Save"})]})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 border border-gray-200",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-14 h-14 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(N,{className:"text-red-600",size:32})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Delete Service Area?"}),e.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete this service area?"," ",e.jsx("span",{className:"font-bold",children:"This action cannot be undone."})]})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[e.jsx("button",{onClick:()=>x(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition font-medium",children:"Cancel"}),e.jsx("button",{onClick:z,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium shadow-md",children:"Delete"})]})]})})]})}export{X as default};
