import{r as o,u as w,j as e,d as p}from"./index-DNhL7Y25.js";function j(){const[r,d]=o.useState({first_name:"",last_name:"",email:"",password:""}),[a,m]=o.useState({}),[c,u]=o.useState(!1),f=w();o.useEffect(()=>{(async()=>{try{const t=await p.get("/profile");d({first_name:t.data.first_name||"",last_name:t.data.last_name||"",email:t.data.email||"",password:""})}catch(t){console.error("Failed to fetch profile:",t),alert("Failed to load profile")}})()},[]);const b=(l,t)=>{switch(l){case"first_name":if(!t.trim())return"First name is required";break;case"last_name":if(!t.trim())return"Last name is required";break;case"email":if(!t.trim())return"Email is required";if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(t))return"Invalid email address";break;case"password":if(t&&t.length<6)return"Password must be at least 6 characters";break}return""},n=l=>{const{name:t,value:s}=l.target;d(i=>({...i,[t]:s})),m(i=>({...i,[t]:b(t,s)}))},x=async l=>{l.preventDefault();const t={};if(Object.entries(r).forEach(([s,i])=>{const h=b(s,i||"");h&&(t[s]=h)}),m(t),!(Object.keys(t).length>0)){u(!0);try{const s={...r};s.password||delete s.password,await p.put("/profile",s),alert("Profile updated successfully!"),f("/dashboard")}catch(s){console.error("Profile update failed:",s),alert("Failed to update profile")}finally{u(!1)}}};return e.jsx("div",{className:"min-h-screen bg-[#080b3d] text-white flex items-center justify-center px-6",children:e.jsxs("div",{className:"w-full max-w-md bg-white/10 p-8 rounded-3xl shadow-xl",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Edit Profile"}),e.jsxs("form",{onSubmit:x,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:"First Name"}),e.jsx("input",{type:"text",name:"first_name",value:r.first_name,onChange:n,className:`w-full px-4 py-2 rounded-lg bg-white/20 focus:bg-white/30 outline-none ${a.first_name?"border-red-500 border":""}`,required:!0}),a.first_name&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:a.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:"Last Name"}),e.jsx("input",{type:"text",name:"last_name",value:r.last_name,onChange:n,className:`w-full px-4 py-2 rounded-lg bg-white/20 focus:bg-white/30 outline-none ${a.last_name?"border-red-500 border":""}`,required:!0}),a.last_name&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:a.last_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:n,className:`w-full px-4 py-2 rounded-lg bg-white/20 focus:bg-white/30 outline-none ${a.email?"border-red-500 border":""}`,required:!0}),a.email&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:"New Password (optional)"}),e.jsx("input",{type:"password",name:"password",value:r.password,onChange:n,className:`w-full px-4 py-2 rounded-lg bg-white/20 focus:bg-white/30 outline-none ${a.password?"border-red-500 border":""}`,placeholder:"Leave blank to keep current"}),a.password&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:a.password})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-500 hover:bg-blue-600 transition py-2 rounded-lg font-semibold shadow-md",children:c?"Saving...":"Save Changes"})]}),e.jsx("button",{onClick:()=>f("/dashboard"),className:"mt-4 w-full border border-white/40 py-2 rounded-lg font-medium hover:bg-white/20 transition",children:"Cancel"})]})})}export{j as default};
