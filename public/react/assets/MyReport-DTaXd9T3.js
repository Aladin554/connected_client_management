import{u as D,r as m,j as e,d as h}from"./index-BVvtZPCr.js";import{H as $,F as C}from"./Footer-Qm95fKMB.js";import{L as H}from"./Loader-CnwL02bI.js";function P(){var f,u,b,g,j,y,N;const p=D(),[s,w]=m.useState(null),[_,v]=m.useState([]),[k,F]=m.useState(!0);m.useEffect(()=>{(async()=>{var a;try{const d=(await h.get("/reports/me")).data;let i=[];if((a=d.challenge_data)!=null&&a.common_department_id)try{const r=JSON.parse(d.challenge_data.common_department_id);r.length>0&&(i=((await h.get("/common-departments")).data.data||[]).filter(x=>r.includes(x.id)))}catch(r){console.error("Failed to parse common_department_id:",r)}if(w({...d,common_departments:i}),i.length>0){const r=await h.get("/industry");v(r.data.data||[])}}catch{alert("Failed to load your report.")}finally{F(!1)}})()},[]);const o=["from-[#f97316] to-[#fb923c]","from-[#2563eb] to-[#1d4ed8]","from-[#10b981] to-[#059669]","from-[#8b5cf6] to-[#7c3aed]","from-[#ef4444] to-[#b91c1c]"];if(k)return e.jsx(H,{message:"Fetching your report..."});if(!s)return e.jsx("div",{className:"text-center text-white p-8",children:"No report found."});const c=new Map;if((f=s.challenge_data)!=null&&f.industry){const{industry:t,department_ids:a}=s.challenge_data,l=((u=t.departments)==null?void 0:u.filter(d=>a.includes(d.id)))||[];c.set(t.id,l)}return(b=s.related_industries)==null||b.forEach(t=>{c.set(t.id,t.departments)}),e.jsxs(e.Fragment,{children:[e.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Poppins:wght@400;500;600;700;800;900&display=swap",rel:"stylesheet"}),e.jsx("style",{children:`
          :root {
            --bg: #0f1533;
            --accent: #18e08a;
          }
          body {
            font-family: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, 'Helvetica Neue', Arial;
            background-color: #080b3d;
          }
          .font-serif {
            font-family: 'serif';
          }
        `}),e.jsxs("div",{className:"text-white bg-[#080b3d] min-h-screen",children:[e.jsx($,{userName:`${s.first_name} ${s.last_name}`,onLogout:()=>{localStorage.removeItem("token"),sessionStorage.removeItem("token"),p("/signin")}}),e.jsx("main",{className:"flex flex-col items-center justify-start px-4 py-10",children:e.jsxs("div",{className:"w-full max-w-6xl rounded-2xl shadow-2xl text-white p-8 border border-white/10 bg-[#0f1533]/60 backdrop-blur-md",children:[e.jsx("h1",{className:"text-4xl font-extrabold mb-4",children:"My Report"}),e.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed text-sm lg:text-base",children:"Hereâ€™s a summary of your career interest selections and personality highlights."}),e.jsx("div",{className:"space-y-6",children:(((g=s.common_departments)==null?void 0:g.length)??0)>0?_.map((t,a)=>{const l=c.get(t.id)||[],d=s.common_departments.map(n=>({...n,name:`${n.name} (Common)`})),r=[...l,...d].filter((n,x,I)=>I.findIndex(S=>S.id===n.id)===x);return e.jsxs("div",{className:`rounded-2xl p-6 text-left shadow-lg transition-all duration-300 transform hover:-translate-y-1 hover:shadow-xl bg-gradient-to-br ${o[a%o.length]}`,children:[e.jsx("h2",{className:"text-2xl font-extrabold mb-3",children:t.name}),e.jsx("div",{className:"flex flex-wrap gap-3 mt-3",children:r.map(n=>e.jsx("span",{className:"bg-white/20 px-4 py-1.5 rounded-full text-sm font-medium backdrop-blur-sm",children:n.name},n.id))})]},t.id)}):e.jsxs(e.Fragment,{children:[((j=s.challenge_data)==null?void 0:j.industry)&&e.jsxs("div",{className:`rounded-2xl p-6 text-left shadow-lg bg-gradient-to-br ${o[0]}`,children:[e.jsx("h2",{className:"text-2xl font-extrabold mb-3",children:s.challenge_data.industry.name}),e.jsx("div",{className:"flex flex-wrap gap-3 mt-3",children:(y=s.challenge_data.industry.departments)==null?void 0:y.filter(t=>{var a;return(a=s.challenge_data)==null?void 0:a.department_ids.includes(t.id)}).map(t=>e.jsx("span",{className:"bg-white/20 px-4 py-1.5 rounded-full text-sm font-medium backdrop-blur-sm",children:t.name},t.id))})]}),(N=s.related_industries)==null?void 0:N.map((t,a)=>e.jsxs("div",{className:`rounded-2xl p-6 text-left shadow-lg bg-gradient-to-br ${o[(a+1)%o.length]}`,children:[e.jsx("h2",{className:"text-2xl font-extrabold mb-3",children:t.name}),e.jsx("div",{className:"flex flex-wrap gap-3 mt-3",children:t.departments.map(l=>e.jsx("span",{className:"bg-white/20 px-4 py-1.5 rounded-full text-sm font-medium backdrop-blur-sm",children:l.name},l.id))})]},t.id))]})}),s.submitted_answers&&s.submitted_answers.length>0&&e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Personality Highlights"}),e.jsx("div",{className:"bg-white/10 rounded-2xl overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b border-white/20",children:[e.jsx("th",{className:"px-4 py-3",children:"Area"}),e.jsx("th",{className:"px-4 py-3",children:"Preference"})]})}),e.jsx("tbody",{children:s.submitted_answers.map(t=>{var a;return e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("td",{className:"px-4 py-2",children:(a=t.question)==null?void 0:a.title}),e.jsx("td",{className:"px-4 py-2",children:t.selected_option})]},t.id)})})]})})]}),e.jsx("div",{className:"mt-10 space-y-3",children:e.jsx("button",{onClick:()=>p("/dashboard"),className:"w-full bg-[#0055FF] hover:bg-[#0042cc] text-white font-semibold py-3 rounded-xl transition duration-200",children:"Back to Dashboard"})})]})}),e.jsx(C,{})]})]})}export{P as default};
