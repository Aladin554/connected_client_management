import{u as f,r as i,j as e,L as p,d as j,i as y}from"./index-BkDEBjE8.js";import{L as N}from"./Loader-DmWhfnO9.js";import{S as v}from"./search-kO-FRy60.js";import{L as w}from"./layout-grid-CVscFb-y.js";import"./createLucideIcon-3adLFeee.js";function M(){const r=f(),[t,d]=i.useState([]),[o,h]=i.useState(null),[g,c]=i.useState(!0),[m,u]=i.useState("");i.useEffect(()=>{(async()=>{try{c(!0);const[a,n]=await Promise.all([j.get("/cities"),y()]);d(a.data||[]),h(n)}finally{c(!1)}})()},[]);const l=m.trim().toLowerCase(),x=i.useMemo(()=>l?t.map(s=>{const n=s.name.toLowerCase().includes(l)?s.boards:s.boards.filter(b=>b.name.toLowerCase().includes(l));return{...s,boards:n}}).filter(s=>s.boards.length>0):t,[t,l]);return g?e.jsx(N,{message:"Loading dashboard..."}):e.jsxs("div",{className:"h-screen bg-gray-50/70 flex flex-col text-gray-800",children:[e.jsxs("header",{className:"h-14 bg-white/80 backdrop-blur-sm border-b flex items-center px-4 gap-4 z-10",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{type:"button",onClick:()=>r("/"),className:"h-8 flex items-center cursor-pointer",title:"Go to home",children:e.jsx("img",{src:"/images/logo/connected_logo.png",alt:"Connected Logo",className:"h-8 w-auto object-contain"})})}),e.jsx("div",{className:"flex-1 flex justify-center px-6",children:e.jsxs("div",{className:"relative w-full max-w-2xl",children:[e.jsx(v,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{placeholder:"Search boards...",value:m,onChange:s=>u(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100/70 border rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-200 transition"})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:()=>r("/profile"),className:"h-8 px-3 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm font-semibold flex items-center justify-center shadow-sm hover:opacity-95",title:"Edit profile",children:(o==null?void 0:o.first_name)||"User"})})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("aside",{className:"w-64 bg-white/60 border-r px-3 py-5 hidden md:block overflow-y-auto",children:e.jsx("div",{className:"space-y-1 mb-8",children:e.jsx(C,{icon:e.jsx(w,{size:18}),label:"Boards",active:!0})})}),e.jsx("main",{className:"flex-1 px-6 md:px-12 py-10 overflow-y-auto",children:e.jsxs("div",{className:"flex flex-col gap-12 max-w-6xl mx-auto",children:[e.jsxs("section",{className:"rounded-2xl border border-gray-200 bg-white px-6 py-5 shadow-sm",children:[e.jsxs("h1",{className:"text-2xl font-extrabold text-gray-900",children:["Hi ",(o==null?void 0:o.first_name)||"User"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Get started below with your designated workspace."}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2.5",children:t.map(s=>e.jsx("span",{className:"inline-flex items-center rounded-lg border border-gray-200 bg-gray-50 px-3 py-1.5 text-sm font-medium text-gray-700",children:s.name},`workspace-${s.id}`))})]}),x.length===0?e.jsxs("div",{className:"text-center py-20 text-gray-600 bg-white rounded-2xl shadow-sm border",children:[e.jsx("p",{className:"text-xl font-semibold mb-3",children:l?"No matching boards found":"No cities available yet"}),e.jsx("p",{className:"text-gray-500",children:l?"Try another board or city name":"Contact your administrator or create your first city"})]}):x.map(s=>e.jsxs("section",{className:"space-y-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-teal-600 text-white rounded-lg flex items-center justify-center font-bold text-xl shadow-sm",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.boards.length," board",s.boards.length!==1?"s":""]})]})]})}),s.boards.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.boards.map(a=>e.jsx(p,{to:`/boards/${a.id}`,children:e.jsx(L,{title:a.name,background_gradient:a.background_gradient})},a.id))}):e.jsxs("div",{className:"text-center py-16 text-gray-500 bg-gray-50/70 rounded-2xl border border-dashed",children:["No boards created in this city yet",e.jsx("div",{className:"mt-3 text-sm",children:"Ask your admin to add boards"})]})]},s.id))]})})]})]})}function C({icon:r,label:t,active:d}){return e.jsxs("div",{className:`flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer ${d?"bg-blue-50 text-blue-700":"hover:bg-gray-100"}`,children:[r,t]})}function L({title:r,background_gradient:t}){return e.jsxs("div",{className:"h-44 rounded-2xl overflow-hidden shadow border hover:shadow-lg transition-all duration-200 group",children:[e.jsx("div",{className:"h-32",style:{background:t||"linear-gradient(135deg, #667eea, #764ba2)"}}),e.jsx("div",{className:"p-4 bg-white font-medium text-gray-800 group-hover:text-blue-700 transition-colors",children:r})]})}export{M as default};
